
@{
    ViewBag.Title = "Index";
}

<h2>Colum Chart With Animation</h2>

<br/>

<div id="visualization" style="width:600px; height:300px;">


</div>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
@Ajax.BeginForm("GetSalesData","Report", new { }, new AjaxOptions{ }, new { })
@section Scripts{
    <script>
        $(document).ready(function () {
            //loading database data
            var chartData = null;
            $.ajax({
                url: '/Report/GetSalesData',
                type: '',
                dataType: '',
                data: '',
                success: function (d) {
                    chartData = d; 
                },
                error: function () {
                    alert("Error!")
                }
            }).done(function () {
                drawChart(chartData);
            });
        });

        function drawChart(d) {
            var chartData = d;
            var data = null;
            data = google.visualization.arrayToDataTable(chartData);

            var view = new google.visualization.DataView(data);
            view.setColumns([0, {
                type: 'number',
                label: data.getColumnLabel(0),
                calc: function () { return 0; }
            },{
                type: 'number',
                label: data.getColumnLabel(1),
                calc: function () { return 0; }
            }]);

            var chart = new google.visualization.ColumnChart(document.getElementById('visualization'));
            var options = {
                title: 'Sales Report',
                legend: 'bottom',
                hAxis: {
                    title: 'Quantity',
                    format: '#',
                },
                vAxis: {
                    minValue: 0,
                    maxValue: 10000000,
                    title: 'sales Amount'
                },
                chartArea: {
                    left: 100, top: 50, width: '70%', height: '50%'
                },
                animation: {
                    duration: 1000
                }
            };
            var runFirst = google.visualization.events.addListener(chart, 'ready', function () {
                google.visualization.events.removeListener(runFirstTime);
                chart.draw(data, options);
            });

            char.draw(view, options); 
        }
        google.load('visualization', '1', { packges: ['corechart'] });

    </script>
    
    

 @Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js")
}


